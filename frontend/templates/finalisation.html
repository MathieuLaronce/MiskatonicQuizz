<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <title>Finalisation du Quiz</title>
  <link rel="stylesheet" href="{{ url_for('static', filename='visualisation.css') }}">
</head>
<body>
  <div class="container">
    <img src="{{ url_for('static', filename='images/logo.png') }}" alt="Logo Miskatonic" class="logo" />

    <h1>Finalisation du quiz</h1>
    <p class="subtitle">Votre quiz est prêt à être partagé avec vos élèves.</p>

    <div class="steps">
      <div class="step">1</div>
      <div class="step">2</div>
      <div class="step active">3</div>
    </div>

    <!-- Résumé du quiz -->
    <div class="quiz-summary">
      <h2>Quiz final : {{ categories|join(', ') }} - {{ nombre }} questions</h2>

      {% for question in questions %}
      <div class="question-box">
        <strong>Q{{ loop.index }}:</strong> {{ question.question }}
        <p><em>Sujet :</em> {{ question.subject }}</p>
        <div class="answers">
          {% for ans in question.possible_answers %}
            {% if ans in question.correct_answers %}
              <div class="correct">{{ ans }}</div>
            {% else %}
              <div>{{ ans }}</div>
            {% endif %}
          {% endfor %}
        </div>
      </div>
      {% endfor %}
    </div>

    <!-- Lien partageable -->
    <div class="share-link">
      <p>Partagez ce lien avec vos élèves :</p>
      <input type="text" value="{{ share_link }}" readonly onclick="this.select()">
      <button onclick="navigator.clipboard.writeText('{{ share_link }}')">Copier le lien</button>
    </div>

    <!-- Boutons action -->
    <div style="margin-top: 20px; display: flex; gap: 10px; flex-direction: column;">
      <a href="{{ url_for('selection') }}">
        <button type="button" class="btn">Créer un nouveau quiz</button>
      </a>
      <a href="{{ url_for('index') }}">
        <button type="button" class="btn">Retour à l'accueil</button>
      </a>
    </div>
  </div>
</body>
</html>
